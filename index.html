<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>CGM - LOGISTA</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
  <script type="text/javascript" src="<https://js.sandbox.dalenys.com/hosted-fields/v2.0.0/hosted-fields.min.js>"></script>
<link rel="stylesheet" href="./style.css">

</head>
<body>
<!-- partial:index.partial.html -->
<!-- multistep form -->
<form id="msform" action="https://myshop.com/payment/process" name="myForm" onsubmit="return tokenizeHandler()">
  <!-- progressbar -->
  <ul id="progressbar">
    <li class="active">Creation du compte</li>
    <li>Signature du contrat</li>
    <li>Signature du mondat</li>
  </ul>
  <!-- fieldsets -->
  <fieldset>
    <h2 class="fs-title">Creation du compte</h2>
    <h3 class="fs-subtitle">Veuillez renseigner ses champs</h3>
    <input type="text" id="nom"  name="nom" placeholder="Nom point de vente" />
    <input type="password" id="mot_de_passe" name="mot_de_passe" placeholder="Mot de passe" />
    <input type="password" id="mot_de_passe_confirmation" name="mot_de_passe_confirmation" placeholder="Confirmez votre mot de passe" />
    <input type="text" id="contact_nom" name="contact_nom" placeholder="Votre nom" />
    <input type="text" id="contact_prenom" name="contact_prenom" placeholder="Votre prenom" />
    <input type="text" id="siret" name="siret" placeholder="Votre Siret" />
    <input type="text" id="code_postal" name="code_postal" placeholder="Votre code postal" />
    <input type="text" id="ville" name="ville" placeholder="Votre ville" />
    <input type="text" id="adresse" name="adresse" placeholder="Votre adresse" />
    <input type="button" name="next" class="next action-button" value="Next" />
  </fieldset>
  <fieldset>
    <h2 class="fs-title">Signature du contrat</h2>
    <h3 class="fs-subtitle">Veuillez signer ce contrat</h3>
    <input type="button" name="previous" class="previous action-button" value="Previous" />
    <input type="button" name="next" class="next action-button" value="Next" />
  </fieldset>
  <fieldset>
    <h2 class="fs-title">Signature du mondat</h2>
    <h3 class="fs-subtitle">Veuillez signer ce mondat</h3>
    <input type="hidden" name="hf-token" id="hf-token">
    <input type="button" name="previous" class="previous action-button" value="Previous" />
    <input type="submit" name="submit" class="submit action-button" value="Submit" />
  </fieldset>
</form>
<!-- partial -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js'></script><script  src="./script.js"></script>
<script type="text/javascript">
  function tokenizeHandler() {
    hfields.createToken(function (result) {
      console.log(result); // Debug
      if (result.execCode == '0000') {
        // Set the token in an hidden input field to transmit it to the merchant submit page
        document.getElementById('hf-token').value = result.hfToken;
        // Set the selected brand in an hidden input field to transmit it to the merchant submit page
        document.getElementById('selected-brand').value = result.selectedBrand;
        // Send the form request
        document.myForm.submit();
      }
    });
    // Prevents the submit of the form in case of failed tokenization request
    return false;
  }
</script>

</body>
</html>
